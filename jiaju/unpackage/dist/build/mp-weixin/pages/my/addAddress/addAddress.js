(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/addAddress/addAddress"],{"04cc":function(e,t,n){"use strict";n.r(t);var s=n("0b14"),o=n.n(s);for(var d in s)"default"!==d&&function(e){n.d(t,e,(function(){return s[e]}))}(d);t["default"]=o.a},"0b14":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=d(n("a34a")),o=n("f7b8");function d(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,s,o,d,r){try{var a=e[d](r),i=a.value}catch(c){return void n(c)}a.done?t(i):Promise.resolve(i).then(s,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(s,o){var d=e.apply(t,n);function a(e){r(d,s,o,a,i,"next",e)}function i(e){r(d,s,o,a,i,"throw",e)}a(void 0)}))}}var i=function(){Promise.all([n.e("common/vendor"),n.e("components/simple-address/simple-address")]).then(function(){return resolve(n("8fe4"))}.bind(null,n)).catch(n.oe)},c={components:{simpleAddress:i},data:function(){return{cityPickerValueDefault:[0,0,1],editType:!1,id:"",name:"",tel:"",detailed:"",isDefault:!1,cityPickerValue:[0,0,0],addressid:"",themeColor:"#007AFF",region:{label:"请点击选择地址",value:[],cityCode:""},address:{},addressInfo:{},currentError:""}},methods:{saveAddress:function(){var t=this;return a(s.default.mark((function n(){var d,r,a;return s.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(d={province:t.region.value[0],city:t.region.value[1],region:t.region.value[2],cityCode:t.region.cityCode,defaultStatus:t.isDefault?1:0,detailAddress:t.detailed,name:t.name,phoneNumber:t.tel,postCode:"",tag:""},!t.editType){n.next=12;break}return d.memberId=t.addressInfo.memberId,d.id=t.addressInfo.id,console.log("obj",d),n.next=7,(0,o.updateAddressInfo)(d);case 7:r=n.sent,console.log("await updateAddressInfo(obj)",r),1==r.data.success&&(e.showToast({title:"更新成功"}),setTimeout((function(){e.navigateTo({url:"../address/address"})}),1e3)),n.next=17;break;case 12:return n.next=14,(0,o.addAddress)(d);case 14:a=n.sent.data,console.log("await addAddress(obj)",a),a.success&&(e.showToast({title:"添加成功"}),setTimeout((function(){e.navigateTo({url:"../address/address"})}),1e3));case 17:case"end":return n.stop()}}),n)})))()},getAddressById:function(e){var t=this;(0,o.allAddress)().then((function(n){var s=n.data.data.items.find((function(t){return t.id==e}));t.addressInfo=s,t.name=s.name,t.tel=s.phoneNumber,t.detailed=s.detailAddress,t.isDefault=!!s.defaultStatus}))},chooseCity:function(){console.log("chooseCity()"),console.log("this.$refs.simpleAddress",this.$refs.simpleAddress),this.$refs.simpleAddress.open()},onConfirm:function(e){console.log("onConfirm(e)",e),this.region.cityCode="".concat(e.provinceCode,"-").concat(e.cityCode,"-").concat(e.areaCode),this.region.label=e.labelArr.join("-"),this.region.value=e.labelArr},deleteAddress:function(){var t=this;return a(s.default.mark((function n(){return s.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.showModal({title:"删除提示",content:"你将删除这个收货地址",success:function(n){console.log("res",n),1==n.confirm&&(0,o.deleteAddress)(t.addressid).then((function(t){console.log("deleteAddress(this.addressid)",t),e.showToast({title:"删除成功"}),setTimeout((function(){e.navigateTo({url:"../address/address"})}),1e3)}))}});case 1:case"end":return n.stop()}}),n)})))()},isDefaultChange:function(t){console.log("看看这是啥东西",t),this.isDefault=t.detail.value,this.editType&&(0,o.switchDefault)(this.addressid,1==t.detail.value?1:0).then((function(t){1==t.success&&e.showToast({title:"切换默认成功"})}))}},onLoad:function(e){console.log("onLoad(e)",e),e.addressId?(this.editType=!0,this.addressid=e.addressId,this.getAddressById(e.addressId),console.log("有id")):(this.editType=!1,console.log("无id"))}};t.default=c}).call(this,n("543d")["default"])},"1e32":function(e,t,n){"use strict";n.r(t);var s=n("e346"),o=n("04cc");for(var d in o)"default"!==d&&function(e){n.d(t,e,(function(){return o[e]}))}(d);n("bac4");var r,a=n("f0c5"),i=Object(a["a"])(o["default"],s["b"],s["c"],!1,null,"003de3ba",null,!1,s["a"],r);t["default"]=i.exports},"86f5":function(e,t,n){},bac4:function(e,t,n){"use strict";var s=n("86f5"),o=n.n(s);o.a},e346:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return s}));var s={simpleAddress:function(){return Promise.all([n.e("common/vendor"),n.e("components/simple-address/simple-address")]).then(n.bind(null,"8fe4"))}},o=function(){var e=this,t=e.$createElement;e._self._c},d=[]},f167:function(e,t,n){"use strict";(function(e){n("16cf");s(n("66fd"));var t=s(n("1e32"));function s(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])}},[["f167","common/runtime","common/vendor"]]]);